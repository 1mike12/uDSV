/*! https://github.com/leeoniya/uDSV (v0.1.0) */
var uDSV=function(e){"use strict";const t='"',l=["\t","|",";",","];function n(e,l,n,s,i){let r=l.cols.delim,h=l.rows.delim,o=i||l.cols.names.length,c=!(!i||!n),f=h.length;if(!l.quote){let t=[],l=0,i=-1;for(;(i=e.indexOf(h,l))>-1&&(t.push(e.slice(l,i).split(r)),l=i+f,!n||t.length!==n);)5e3===t.length&&(s(t),t=[]);return void(t.length>0&&s(t))}let a=h.charCodeAt(0),d=r.charCodeAt(0);const u=c?RegExp(`[^${r}${h}]+`,"my"):null;let g=0,p=0,m=e.length-1,A=[],x="",y=Array(o),O=0,C=o-1;for(;m>=p;){let l=e.charCodeAt(p);if(0===g)if(34===l)g=2,p+=1,l=e.charCodeAt(p);else if(l===d||l===a){if(y[O]=x,O+=1,p+=1,x="",l===a){if(A.push(y),n&&A.length===n)return void s(A);5e3===A.length&&(s(A),A=[]),y=Array(o),O=0,p+=f-1}l=e.charCodeAt(p)}else g=1;if(2===g)if(34===l)34===e.charCodeAt(p+1)?(x+=t,p+=2):(g=0,p+=1);else{let l=e.indexOf(t,p);x+=e.slice(p,l),p=l}else if(1===g)if(l===d||l===a){if(y[O]=x,O+=1,p+=1,x="",l===a){if(A.push(y),n&&A.length===n)return void s(A);5e3===A.length&&(s(A),A=[]),y=Array(o),O=0,p+=f-1}g=0}else if(c){u.lastIndex=p;let t=u.exec(e)[0];x+=t,p+=t.length}else{let t;O===C?(t=e.indexOf(h,p),-1===t&&(t=e.length)):t=e.indexOf(r,p),x+=e.slice(p,t),p=t}}y[O]=x,A.push(y),s(A)}return e.parse=n,e.schema=function(e,s=10){const i=e.match(/(.*)(\r?\n?)/),r=i[1],h=i[2],o=l.find((e=>r.indexOf(e)>-1)),c={quote:e.indexOf('"')>-1?t:"",cols:{delim:o,names:[],types:[]},rows:{delim:h}},f=r.split(o).length+1,a=[];n(e,c,s,(e=>a.push(...e)),f);const d=Object.keys(a.shift());return c.cols.names=d,c.cols.types=Array(d.length).fill("s"),a.forEach((e=>{e.forEach(((e,t)=>{Number.isNaN(+e)||(c.cols.types[t]="n")}))})),c},e}({});
