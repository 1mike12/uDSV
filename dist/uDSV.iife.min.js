/*! https://github.com/leeoniya/uDSV (v0.1.0) */
var uDSV=function(e){"use strict";const t=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/,l=["\t","|",";",","];function n(e,l){let n=`r[${l}]`,r=n,i=e.find((e=>null!=e[l]&&""!==e[l]));if(null!=i){let e=i[l];if(t.test(e))r=`new Date(${n})`;else if(Number.isNaN(Number.parseFloat(e))){if(/^(?:true|false|yes|no)$/i.test(e)){let[t,l]=e;r=`${n} === '${"t"==t||"f"==t?"true":"T"==t||"F"==t?"R"==l||"A"===l?"TRUE":"True":"y"==t||"n"==t?"yes":"Y"==t||"N"==t?"E"==l||"O"===l?"YES":"Yes":""}' ? true : false`}else if("["===e[0]||"{"===e[0])try{JSON.parse(e),r=`JSON.parse(${n})`}catch{}}else r=`${n} === 'NaN' ? NaN : Number.parseFloat(${n})`}return`${n} === '' || ${n} === 'null' || ${n} === 'NULL' ? null :  ${r}`}const r=/\w+(?:\[|\]?[\.\[]?|$)/gm;function i(e,t,l=!1,i=!1){let s="";if(l){let l={},o=0,f=e.slice();do{let e=f.shift(),t=!i||/\s/.test(e)?[e]:[...e.matchAll(r)].flatMap((e=>e.map((e=>e.replace("]",""))))),n=l;do{let e=t.shift(),l=e,r=e.at(-1);"."==r||"["==r?(l=e.slice(0,-1),n=n[l]=n[l]??("."==r?{}:[])):n[l]=`¦${o}¦`}while(t.length>0);o++}while(f.length>0);s=JSON.stringify(l).replace(/"¦(\d+)¦"/g,((e,l)=>n(t,+l)))}else s="[",e.forEach(((e,l)=>{let r=n(t,l);s+=r+","})),s+="]";return Function("rows",`\n\t\tlet arr = Array(rows.length);\n\n\t\tfor (let i = 0; i < rows.length; i++) {\n\t\t\tlet r = rows[i];   // trim()?\n\t\t\tarr[i] = ${s};\n\t\t}\n\n\t\treturn arr;\n\t`)}function s(e,t,l,n=!0,r=5e3,i=null,s=null){let o=t.cols.delim,f=t.rows.delim,u=t.quote??"",c=s||t.cols.names.length,a=null!=i,h=null!=s&&a,d=f.length,g=0;if(""===u){let t=e.split(f),s="",u=t.length;n||(u-=1,s=t[u]);let c=[];for(let e=0;u>e;e++){let n=t[e].split(o);if(c.push(n),c.length===r&&(l(c,g++,""),c=[],a&&g===i))return}return void((c.length>0||""!==s)&&l(c,g++,s))}let $=""==u?0:u.charCodeAt(0),p=f.charCodeAt(0),m=o.charCodeAt(0);const A=h?RegExp(`[^${o}${f}]+`,"my"):null,N=Array(c).fill("");let w,b=0,k=0,y=e.length-1,C=0,O=[],x="",E=N.slice(),F=0,S=c-1,T=-1;for(;y>=k;){if(w=e.charCodeAt(k),0===b)if(w===$){if(b=2,k+=1,k>y)break;w=e.charCodeAt(k)}else if(w===m||w===p){if(E[F]=x,T=F,F+=1,k+=1,x="",w===p){if(h&&S>T&&0===O.length&&(E.length=N.length=T+1,S=T),O.push(E),O.length===r&&(l(O,g++,""),O=[],a&&g===i))return;E=N.slice(),F=0,T=-1,k+=d-1,C=k}if(k>y)break;w=e.charCodeAt(k)}else b=1;if(2===b)for(;;)if(w===$){if(k+1>y){k=y+1;break}if(e.charCodeAt(k+1)!==$){b=0,k+=1;break}if(x+=u,k+=2,k>y){k=y+1;break}w=e.charCodeAt(k)}else{let t=e.indexOf(u,k);if(-1===t){k=y+1;break}x+=e.slice(k,t),k=t,w=$}else if(1===b)if(w===m||w===p){if(E[F]=x,T=F,F+=1,k+=1,x="",w===p){if(h&&S>T&&0===O.length&&(E.length=N.length=T+1,S=T),O.push(E),O.length===r&&(l(O,g++,""),O=[],a&&g===i))return;E=N.slice(),F=0,T=-1,k+=d-1,C=k}b=0}else if(h){A.lastIndex=k;let t=A.exec(e)[0];x+=t,k+=t.length}else{let t=e.indexOf(F===S?f:o,k);-1===t&&(t=y+1),x+=e.slice(k,t),k=t}}n&&F===S&&(E[F]=x,O.push(E),b=0),l(O,g++,n||0===b&&!(-1===T?""!==x:S>T)?"":e.slice(C))}return e.parse=s,e.schema=function(e,t){t??=10;const n=e.match(/(.*)(\r?\n?)/),r=n[1],o=n[2],f=l.find((e=>r.indexOf(e)>-1));let u=e.indexOf('"')>-1,c=null,a=null,h=null,d=null;const g={quote:u?'"':null,cols:{delim:f,names:[]},rows:{delim:o},toArrs:e=>(c??=i(m,p,!1,!1),c(e)),toObjs:e=>(a??=i(m,p,!0,!1),a(e)),toDeep:e=>(d??=i(m,p,!0,!0),d(e)),toCols:e=>(h??=function(e){return Function("chunk",`\n\t\tlet cols = [${e.map((()=>"Array(chunk.length)")).join(",")}];\n\n\t\tfor (let i = 0; i < chunk.length; i++) {\n\t\t\tlet row = chunk[i];\n\t\t\t${e.map(((e,t)=>`cols[${t}][i] = row[${t}]`)).join(";")};\n\t\t}\n\n\t\treturn cols;\n\t`)}(m),h(e))},$=r.split(f).length,p=[];s(e.slice(0,8192),g,(e=>p.push(...e)),8192>=e.length,t,1,$);const m=p.shift();return g.cols.names=m,g},e}({});
