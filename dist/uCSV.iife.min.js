/*! https://github.com/leeoniya/uCSV (v0.1.0) */
var uCSV=function(e){"use strict";const t='"',l=e=>e.match(/"/g)?.length??0;function n(e,l,n,s){let i=l.cols.delim,r=l.rows.delim,f=s||l.cols.names.length,c=!(!s||!n);if(!l.quote){let t=e.split(r);return t=n?t.slice(0,n):t,t.map((e=>e.split(i)))}let o=r.length,h=r[0],u=i[0];const a=c?RegExp(`[^${i}${r}]+`,"my"):null;let g=0,m=0,d=e.length-1,p=[],x="",y=Array(f),O=0,A=f-1;for(;d>=m;){let l=e[m];if(0===g)if(l===t)g=2,m+=1;else if(l===u||l===h){if(y[O]=x,O+=1,m+=1,x="",l===h){if(p.push(y),n&&p.length===n)return p;y=Array(f),O=0,m+=o-1}}else g=1;else if(2===g)if(l===t)e[m+1]===t?(x+='"',m+=2):(g=0,m+=1);else{let l=e.indexOf(t,m);x+=e.slice(m,l),m=l}else if(1===g)if(l===u||l===h){if(y[O]=x,O+=1,m+=1,x="",l===h){if(p.push(y),n&&p.length===n)return p;y=Array(f),O=0,m+=o-1}g=0}else if(c){a.lastIndex=m;let t=a.exec(e)[0];x+=t,m+=t.length}else{let t;O===A?(t=e.indexOf(r,m),-1===t&&(t=e.length)):t=e.indexOf(i,m),x+=e.slice(m,t),m=t}}return y[O]=x,p.push(y),p}return e.parse=function(e,t,l){return n(e,t,l)},e.schema=function(e){const s=e.match(/(.*)(\r?\n?)/),i=s[1],r=s[2],f=i.indexOf("\t")>-1?"\t":i.indexOf("|")>-1?"|":i.indexOf(";")>-1?";":",";let c=l(i)>1;if(!c){let t=s.index;c=l(e.slice(t,t+2500))>1}const o={quote:c?t:"",cols:{delim:f,names:[],types:[]},rows:{delim:r}},h=i.match(RegExp(f,"g")).length+1,u=n(e,o,10,h),a=Object.keys(u.shift());return o.cols.names=a,o.cols.types=Array(a.length).fill("s"),u.forEach((e=>{e.forEach(((e,t)=>{Number.isNaN(+e)||(o.cols.types[t]="n")}))})),o},e}({});
